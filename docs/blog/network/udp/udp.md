# UDP

UDP（User Datagram Protocol，用户数据报协议）是一种不可靠的协议，在传送数据时，源主机和目的主机之间不建立连接,可以提供一种基本的、低延时的数据报传输服务。

:::tip Tips
TCP为了确保数据传输的准确和安全可靠，集成了各种安全保障功能，这在实际执行过程中会占用大量的系统开销。因此，UDP具有TCP无法比拟的速度优势。
:::

UDP是被设计来为不需要可靠传输服务的应用层协议服务的，由于不需要提供可靠性，因此UDP很简单。

总的来讲UDP具有以下3个特点

1. 无连接。即发送数据前不需要建立连接，减少了开销和时延。

2. 不可靠。即不保证可靠传输，只是尽力交付。

3. 面向报文。即UDP会原样接收上层交付的报文，而不会做任何拆分或合并等处理。


UDP的主要作用是将网络数据流量压缩成数据报的形式进行传输。每个数据报的前8个字节用来包含报头信息，剩余字节则是具体的传输数据。

![image](/images/network/udp.jpeg)

* 源端口号：表示发送主机上的连接号，源端口号和源IP地址的作用是标识报文的返回地址。

* 目的端口号：表示目的主机的连接号，指定报文接收主机上的应用程序的地址接口。

* 校验和：UDP使用报头中的校验和来保证数据的安全。校验和首先在数据发送方通过特殊的算法计算得出，在传递到接收方之后，还需要再重新计算。如果某个数据报在传输过程中被第三方篡改或者由于线路噪声等原因受到损坏，发送和接收方的校验计算值将不会相符，由此UDP可以检测是否出错。

* 信息长度：指包括报头和数据部分在内的总字节数。因为报头的长度是固定的，所以该值主要被用来计算可变长度的数据部分。


UDP使用端口号为不同的应用保留其各自的数据传输通道，UDP和TCP正是采用这种机制实现对同一时刻内多个应用程序同时发送和接收数据的支持。

数据发送方将UDP数据报通过源端口发送出去，而数据接收方则通过目标端口接收数据。有的网络应用只能使用预先为其保留或注册的静态端口；而另外一些网络应用则可以使用未被注册的动态端口。因为UDP报头使用2字节存放端口号，所以端口号的有效范围是从0到65 535。一般来说，大于49 151的端口号都代表动态端口。


:::tip Tips
与TCP相比，UDP更适合发送数据量比较少、但对响应速度要求比较高的情况
:::